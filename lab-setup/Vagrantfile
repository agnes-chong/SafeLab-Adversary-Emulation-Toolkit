# Vagrantfile - optional helper to spin up disposable VMs (requires Vagrant + VirtualBox)
Vagrant.configure("2") do |config|
  config.vm.box = "ubuntu/focal64"
  config.vm.hostname = "safelab-ubuntu"
  config.vm.network "private_network", ip: "192.168.56.10"
  config.vm.provider "virtualbox" do |vb|
    vb.memory = 2048
    vb.cpus = 2
  end

  config.vm.provision "shell", inline: <<-SHELL
    apt-get update -y
    apt-get install -y python3 python3-venv python3-pip curl
    pip3 install --upgrade pip
    # Optional: install a small local echo server for testing
    cat > /home/vagrant/echo_server.py <<'PY'
from flask import Flask, request, jsonify
app = Flask(__name__)
@app.route('/echo', methods=['POST'])
def echo():
    return jsonify({"received": request.json}), 200
if __name__ == '__main__':
    app.run(host='0.0.0.0', port=8000)
PY
    chown vagrant:vagrant /home/vagrant/echo_server.py
  SHELL
end
